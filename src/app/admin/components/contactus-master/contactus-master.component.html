<div class="container mt-4">
  <div class="row align-items-center mb-3">
    <div class="col-12 col-md-6">
      <h5 class="fw-bold">{{ formTitle }}</h5>
    </div>
    <div class="col-12 col-md-6 text-md-end">
      <div class="d-flex justify-content-md-end gap-2">
        <select class="form-select" style="width: auto;" [(ngModel)]="selectedCompanyCode">
          <option value="">-- Select Company --</option>
          <option *ngFor="let company of companyList" [value]="company.companyCode">
            {{ company.name }}
          </option>
        </select>
        <button class="btn btn-primary" (click)="searchByCompany()">Search</button>
          <button class="btn btn-secondary" (click)="clearFilter()">Clear</button>
      </div>
    </div>
  </div>

  <!-- Existing table -->
  <table class="table table-bordered table-hover">
    <thead class="table-light">
      <tr>
        <th>#</th>
        <th>Full Name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Selected Services</th>
        <th>Message</th>
      </tr>
    </thead>
    <tbody>
      <!-- If data exists -->
      <tr *ngFor="let contact of getPaginatedContacts(); let i = index">
        <td>{{ (page - 1) * pageSize + i + 1 }}</td>
        <td>{{ contact.firstName }} {{ contact.lastName }}</td>
        <td>{{ contact.email }}</td>
        <td>{{ contact.phoneNumber }}</td>
        <td>{{ contact.service }}</td>
        <td>{{ contact.message }}</td>
      </tr>

      <!-- If no data -->
      <tr *ngIf="getPaginatedContacts().length === 0">
        <td colspan="6" class="text-center text-muted">
          No data available
        </td>
      </tr>
    </tbody>
  </table>


  <!-- Pagination -->
  <div class="d-flex flex-wrap justify-content-between align-items-center mt-3">
    <nav>
      <ul class="pagination mb-0">
        <li class="page-item" [class.disabled]="page === 1">
          <button class="page-link" (click)="setPage(page - 1)">Prev</button>
        </li>

        <li class="page-item" *ngFor="let p of [].constructor(totalPages); let idx = index"
          [class.active]="page === idx + 1">
          <button class="page-link" (click)="setPage(idx + 1)">{{ idx + 1 }}</button>
        </li>

        <li class="page-item" [class.disabled]="page === totalPages">
          <button class="page-link" (click)="setPage(page + 1)">Next</button>
        </li>
      </ul>
    </nav>

    <!-- Records info + page size -->
    <div class="d-flex align-items-center gap-3">
      <div class="text-muted small">
        Showing <strong>{{ (page - 1) * pageSize + 1 }}</strong> -
        <strong>{{ Math.min(page * pageSize, totalRecords) }}</strong>
        of <strong>{{ totalRecords }}</strong> records
      </div>

      <select class="form-select" style="width: auto;" [value]="pageSize" (change)="onPageSizeChange($event)">
        <option value="10">10 items per page</option>
        <option value="25">25 items per page</option>
        <option value="50">50 items per page</option>
        <option value="100">100 items per page</option>
        <option value="500">500 items per page</option>
      </select>
    </div>
  </div>
</div>